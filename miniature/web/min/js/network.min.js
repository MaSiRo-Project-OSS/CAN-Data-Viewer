if(!JS_Network)var JS_Network={timeoutID:null,network_list:Array(),timerInterval:3e3,on_change:function(){null!=JS_Network.timeoutID&&(clearTimeout(JS_Network.timeoutID),JS_Network.timeoutID=null)},reception_message:function(data){null!=data&&'OK'==data.result&&(document.getElementById('article_setting').classList.add('div_hide'),document.getElementById('article_message').classList.remove('div_hide'))},set_network:function(){let mode=!0===document.getElementById('mode_ap').checked?1:0;JS_AJAX.post('/set/network?id='+document.getElementById('network_ssid').value+'&pass='+document.getElementById('network_pass').value+'&ap='+mode).then(ok=>JS_Network.reception_message(ok),error=>console.error(error.status.messages))},select_mode:function(id){JS_Network.on_change();var elem_list=document.getElementById('network_list'),elem_scan=document.getElementById('network_scan');!0===document.getElementById('mode_ap').checked?(elem_list.disabled=!0,elem_scan.classList.add('b_disabled')):(elem_list.disabled=!1,elem_scan.classList.remove('b_disabled'))},select_list:function(id){JS_Network.on_change();for(var set_name='',i=0;i<JS_Network.network_list.length;i++)if(id==JS_Network.network_list[i].index){set_name=JS_Network.network_list[i].name;break}document.getElementById('network_ssid').value=set_name},make_option:function(index,name,power){let opt=document.createElement('option');return opt.value=index,opt.innerHTML=(0<power?'  ['+JS_Network.padding(power,3,'&ensp;')+'%]  ':'')+name,opt},set_list:function(data){if(null!=data&&'OK'==data.result){var elm=document.getElementById('network_list');JS_Network.network_list=[],elm.innerHTML='';for(var i=0;i<data.status.data.length;i++){var item=data.status.data[i];let opt;JS_Network.network_list.push({index:i,name:item.name,power:item.power}),document.createElement('option').value=i,elm.appendChild(JS_Network.make_option(i,item.name,item.power))}text='non-public ...';var opt_public=JS_Network.make_option(JS_Network.network_list.length,JS_Network.padding(text,7+text.length,'&ensp;'),-1);opt_public.style.color='darkgrey',elm.appendChild(opt_public)}},padding:function(value,len,pad){for(var buf=''+value,i=buf.length;i<len;i++)buf=pad+buf;return buf},scan:function(){JS_AJAX.get('/get/net_list').then(ok=>JS_Network.set_list(ok),error=>console.error(error.status.messages))},retry_begin:function(data,time_ms){JS_Network.timeoutID=setTimeout(JS_Network.begin,time_ms)},set_info:function(data){var result=!1;if(null!=data&&'OK'==data.result){var mode='mode_sta';1==data.status.data.ap_mode&&(mode='mode_ap'),document.getElementById(mode).checked=!0,document.getElementById('network_ssid').value=data.status.data.name,JS_Network.select_mode(),JS_Network.scan(),result=!0}!1===result&&JS_Network.retry_begin(data,JS_Network.timerInterval)},begin:function(){JS_Network.on_change(),JS_AJAX.get('/get/network').then(ok=>JS_Network.set_info(ok),error=>JS_Network.retry_begin(error,JS_Network.timerInterval))}};window.onload=function(){JS_Network.begin()};